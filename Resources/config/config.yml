parameters:
    ac_web_services.default_response_format_headers:
        json:
            'Content-Type': 'application/json'
        jsonp:
            'Content-Type': 'application/javascript'
        yml:
            'Content-Type': 'application/yaml'
        xml:
            'Content-Type': 'application/xml'
        html:
            'Content-Type': 'text/html; charset=UTF-8'
        xhtml:
            'Content-Type': 'application/xhtml+xml'

services:

    # handles API requests that match based on the app configuration
    ac_web_services.kernel_listeners:
        class: AC\WebServicesBundle\EventListener\WebServiceSubscriber
        arguments:
            - @service_container
            - %ac_web_services.response_format_headers%
            - %ac_web_services.path_config%
            - %ac_web_services.serializable_formats%
        tags:
            -  { name: kernel.event_listener, event: kernel.request, method: onKernelEarlyRequest, priority: 255 }
            -  { name: kernel.event_listener, event: kernel.request, method: onKernelLateRequest, priority: -255 }

    ac_web_services.initialized_object_constructor:
        class: AC\WebServicesBundle\Serializer\InitializedObjectConstructor

    # jms_serializer.object_constructor:
    #     alias: ac_web_services.initialized_object_constructor public: false
